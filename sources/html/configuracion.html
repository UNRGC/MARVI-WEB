<head>
    <!-- Estilos de bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <!-- Iconos de bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <!-- Estilo propio -->
    <link rel="stylesheet" href="../css/configuracion.css" />
    <!-- Script de temas -->
    <script src="../js/temas.js"></script>
</head>
<body>
    <div class="container text-center">
        <h2 class="mt-5">Personaliza tu sistema</h2>
        <p>El sistema se reiniciara al aplicar o restablecer los colores del tema.</p>
        <div class="row row-cols-auto my-5 justify-content-center">
            <div class="col d-flex gap-3 justify-content-center align-items-center">
                <label for="colorPrincipal" class="form-label">Color principal</label>
                <input type="color" class="form-control form-control-color focus-ring" id="colorPrincipal" value="#dd5746" title="Elige tu color favorito" />
            </div>
            <div class="col d-flex gap-3 justify-content-center align-items-center">
                <label for="colorSecundario" class="form-label">Color secundario</label>
                <input type="color" class="form-control form-control-color focus-ring" id="colorSecundario" value="#ffe1c0" title="Elige tu color favorito" />
            </div>
        </div>
        <div class="row row-cols-auto mb-5 justify-content-center">
            <div class="col d-flex justify-content-center align-items-center">
                <label for="mOscuro">Modo oscuro</label>
                <input type="checkbox" id="mOscuro" onclick="modoOscuroEvent(this.checked)" />
            </div>
        </div>
        <div class="row">
            <div class="col">
                <button class="btn aplicar mx-2" onclick="guardarColores(document.getElementById('colorPrincipal').value, document.getElementById('colorSecundario').value)"><i class="bi bi-save"></i> Aplicar cambios</button>
                <button class="btn restablecer mx-2" onclick="restablecerColores()"><i class="bi bi-arrow-counterclockwise"></i> Restablecer colores</button>
            </div>
        </div>
    </div>

    <script>
        document.getElementById("colorPrincipal").addEventListener("input", function () {
            aplicarColores(this.value, document.getElementById("colorSecundario").value);
        });
        document.getElementById("colorSecundario").addEventListener("input", function () {
            aplicarColores(document.getElementById("colorPrincipal").value, this.value);
        });

        function modoOscuroEvent(checked) {
            modoOscuro(checked);
            if (checked === true) window.parent.postMessage("oscuro", "*");
            else window.parent.postMessage("claro", "*");
        }

        function restablecerColores() {
            document.getElementById("colorPrincipal").value = "#dd5746";
            document.getElementById("colorSecundario").value = "#ffe1c0";
            guardarColores("#dd5746", "#ffe1c0");
        }

        document.addEventListener("DOMContentLoaded", function () {
            const sColorPrimario = localStorage.getItem("colorPrimario");
            const sColorSecundario = localStorage.getItem("colorSecundario");
            const sModoOscuro = localStorage.getItem("modoOscuro");

            if (sModoOscuro === "true") {
                document.getElementById("mOscuro").checked = true;
            }
            if (sColorPrimario) {
                document.getElementById("colorPrincipal").value = sColorPrimario;
            }
            if (sColorSecundario) {
                document.getElementById("colorSecundario").value = sColorSecundario;
            }

            modoOscuro(sModoOscuro);
        });
    </script>

    <!-- Scripts de bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
</body>
